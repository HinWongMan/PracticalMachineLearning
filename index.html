<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Practicalmachinelearning by HinWongMan</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Practicalmachinelearning</h1>
      <h2 class="project-tagline">Assignment of Practical Machine Learning</h2>
      <a href="https://github.com/HinWongMan/PracticalMachineLearning" class="btn">View on GitHub</a>
      <a href="https://github.com/HinWongMan/PracticalMachineLearning/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/HinWongMan/PracticalMachineLearning/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <p>&lt;!DOCTYPE html&gt;</p>

<p></p>

<p></p>

<p>

</p>

<p></p>

<p></p>

<p></p>Human Activity Recognisation



<p>
</p>







code{white-space: pre;}

<p></p>




  pre:not([class]) {
    background-color: white;
  }




<p></p>

<p></p>


.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img { 
  max-width:100%; 
  height: auto; 
}


<div>


<div id="header">
<h1>
<a id="human-activity-recognisation" class="anchor" href="#human-activity-recognisation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Human Activity Recognisation</h1>
<h4>
<a id="wong-man-hin" class="anchor" href="#wong-man-hin" aria-hidden="true"><span class="octicon octicon-link"></span></a><em>Wong Man Hin</em>
</h4>
<h4>
<a id="2015-12-25" class="anchor" href="#2015-12-25" aria-hidden="true"><span class="octicon octicon-link"></span></a><em>2015-12-25</em>
</h4>
</div>

<div id="introduction">
<h2>
<a id="introduction" class="anchor" href="#introduction" aria-hidden="true"><span class="octicon octicon-link"></span></a>Introduction</h2>
<p>In this article, we attempted to build a classification model to recognise human activity through motion information gathered by devices, using random forest technique.</p>
</div>

<div id="data-preparation">
<h2>
<a id="data-preparation" class="anchor" href="#data-preparation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Data preparation</h2>
<p>Packages used in the analysis is imported.</p>
<pre><code>library(dplyr)</code></pre>
<pre><code>## 
## Attaching package: 'dplyr'
## 
## The following objects are masked from 'package:stats':
## 
##     filter, lag
## 
## The following objects are masked from 'package:base':
## 
##     intersect, setdiff, setequal, union</code></pre>
<pre><code>library(caret)</code></pre>
<pre><code>## Warning: package 'caret' was built under R version 3.2.3</code></pre>
<pre><code>## Loading required package: lattice
## Loading required package: ggplot2</code></pre>
<p>Data is loaded into R for further processing. Only readings of Eular Angles and readings from accelerometer, gyroscope and magnetometer of the 3 devices are used in the model training.</p>
<pre><code>train &lt;- read.csv("pml-training.csv", stringsAsFactors = FALSE)
train_information &lt;- select(train, matches("^roll|^pitch|^yaw|^gyros|^accel|^magnet|classe"))</code></pre>
<p>Training dataset will be divided into 2 parts, 70% of the data will be training set, while the remaining 30% will be the testing set.</p>
<pre><code>trainIndex &lt;- createDataPartition(train_information$classe, p = 0.70,list=FALSE)
training &lt;- train_information[trainIndex,]
validation &lt;- train_information[-trainIndex,]</code></pre>
</div>

<div id="model-training">
<h2>
<a id="model-training" class="anchor" href="#model-training" aria-hidden="true"><span class="octicon octicon-link"></span></a>Model training</h2>
<p>Caret package is in the model training process. Random forest method with number of tree = 100 is used as the training method. 3-fold cross validation is performed to reduce the probability of overfitting.</p>
<pre><code>rf_model &lt;- train(classe~., data = training, method = "rf", trcontrol = trainControl(method = "cv", number = 3),allowParallel = TRUE, ntree = 100)</code></pre>
<pre><code>## Loading required package: randomForest</code></pre>
<pre><code>## Warning: package 'randomForest' was built under R version 3.2.3</code></pre>
<pre><code>## randomForest 4.6-12
## Type rfNews() to see new features/changes/bug fixes.
## 
## Attaching package: 'randomForest'
## 
## The following object is masked from 'package:dplyr':
## 
##     combine</code></pre>
<pre><code>print(rf_model$finalModel)</code></pre>
<pre><code>## 
## Call:
##  randomForest(x = x, y = y, ntree = 100, mtry = param$mtry, trcontrol = ..1,      allowParallel = TRUE) 
##                Type of random forest: classification
##                      Number of trees: 100
## No. of variables tried at each split: 25
## 
##         OOB estimate of  error rate: 0.94%
## Confusion matrix:
##      A    B    C    D    E class.error
## A 3892   10    2    0    2 0.003584229
## B   26 2621   10    1    0 0.013920241
## C    0   17 2366   13    0 0.012520868
## D    1    1   27 2220    3 0.014209591
## E    0    2    6    8 2509 0.006336634</code></pre>
<p>From the final Model, we get a accuracy rate of 99.0609303%</p>
</div>

<div id="model-testing">
<h2>
<a id="model-testing" class="anchor" href="#model-testing" aria-hidden="true"><span class="octicon octicon-link"></span></a>Model testing</h2>
<p>After building a random forest model for the classification, the model is tested by the testing set.</p>
<p>Model is used to perform the prediction of the testing set.</p>
<pre><code>validation_prediction &lt;- predict(rf_model, newdata = validation)
confusionMatrix(validation_prediction,validation$classe)</code></pre>
<pre><code>## Confusion Matrix and Statistics
## 
##           Reference
## Prediction    A    B    C    D    E
##          A 1672    9    0    0    0
##          B    0 1128    4    0    2
##          C    2    2 1016   10    2
##          D    0    0    6  954    3
##          E    0    0    0    0 1075
## 
## Overall Statistics
##                                           
##                Accuracy : 0.9932          
##                  95% CI : (0.9908, 0.9951)
##     No Information Rate : 0.2845          
##     P-Value [Acc &gt; NIR] : &lt; 2.2e-16       
##                                           
##                   Kappa : 0.9914          
##  Mcnemar's Test P-Value : NA              
## 
## Statistics by Class:
## 
##                      Class: A Class: B Class: C Class: D Class: E
## Sensitivity            0.9988   0.9903   0.9903   0.9896   0.9935
## Specificity            0.9979   0.9987   0.9967   0.9982   1.0000
## Pos Pred Value         0.9946   0.9947   0.9845   0.9907   1.0000
## Neg Pred Value         0.9995   0.9977   0.9979   0.9980   0.9985
## Prevalence             0.2845   0.1935   0.1743   0.1638   0.1839
## Detection Rate         0.2841   0.1917   0.1726   0.1621   0.1827
## Detection Prevalence   0.2856   0.1927   0.1754   0.1636   0.1827
## Balanced Accuracy      0.9983   0.9945   0.9935   0.9939   0.9968</code></pre>
<p>Model is validated and comfortable to predict other cases. Out of sample error is expected to be 1%</p>
</div>

<p></p>
</div>







<p>
</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/HinWongMan/PracticalMachineLearning">Practicalmachinelearning</a> is maintained by <a href="https://github.com/HinWongMan">HinWongMan</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
